campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 30,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 20,
        "fields": {
            "year": 1976,
            "display_year": "1976 - The Deepest Valley",
            "summary": "<strong> Vice President John Connally</strong> has come a long way from being the water boy of Lyndon Johnson. After getting stained with Jack Kennedy's blood, John worked to become more than just another one of Lyndon's lackeys. In Dick Nixon, Connally has found yet another venue to crawl up the ranks of power once more. With Connally's confidence and charm, Nixon has found himself inexplicably enamored with the man. <p> With the President's blessing, John Connally has found himself as the steward for Dick's legacy. With the Nixon name still being political gold, in spite of the downturn the nation has faced since Dick's landslide over Senator McGovern in 1972, the nation seems ready to tread the Nixonian line for four more years. The only way Dick's legacy could be tarnished now is through a political scandal of unprecedented proportions, but there's no way that could happen now, right?",
            "image_url": "https://i.imgur.com/fPHJgUr.png",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://i.imgur.com/sN7b42n.png",
            "recommended_reading": "",
            "has_visits": 1,
            "no_electoral_majority_image": "../static/images/2012-no-majority.jpg"
        }
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 20,
        "year": 1976,
        "is_premium": 0,
        "display_year": "1976 - The Deepest Valley"
    }
]


campaignTrail_temp.modBoxTheme = {
"header_color": "#0000000",
"header_text_color": "#FFFFFF",
"header_image_url": "https://i.imgur.com/RY35cYp.png",
"description_text_color": "#000000",
"description_background_color": "#f8e5e5",
"main_color": "#cda47e",
"secondary_color": "#25090e",
"ui_text_color": "#FFFFFF"
}

campaignTrail_temp.credits = "andySandyWandy"

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 92,
        "fields": {
            "first_name": "John",
            "last_name": "Connally",
            "election": 20,
            "party": "Republican",
            "state": "Texas",
            "priority": 1,
            "description": "<div style='overflow-y:scroll;height:200px;'><p><p><blockquote style='border-style: solid!important; border-width: .1em!important; border-radius: 3px!important; color:#25090e !important; border-color:#25090e!important;margin: px 5px; padding: 2.5px; background: linear-gradient( 135deg, #FDF8F8, #FFF2F2 )!important; font-style: italic; font-size: 14px;'>“I find that I take a great deal of pleasure knowing I get up people's noses to some degree.”</blockquote></p><p>If you were to ask John Connally to his face why Richard Nixon liked him so much, he might say it's because of his confidence, his direct, to the point attitute, his political prowess. If John Connally were forced to answer that question truthfully, however, he wouldn't really know. <p>\n\nWhat has he done for this country? Well, he helped Dick shock the economy into working again, helped him in getting reelected, and he governed the Lone Star state for the better part of a decade. Of course, none of this matters. John Connally is a political chameleon. A former Democrat and Johnson acolyte has fallen right into the hands of the next strongman in power, and has charmed him into letting him become the one that comes after him. <p>\n\nConnally will not let this opportunity slip him by. He will become the next President of the United States off the backs of those who once pulled his strings. If he simply stays the steady course laid out for him, he will breeze to November, and finally reach the White House.",
            "color_hex": "#850f0f",
            "secondary_color_hex": null,
            "is_active": 1,
            "image_url": "https://i.imgur.com/KvXwRCw.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 102,
        "fields": {
            "first_name": "Donald",
            "last_name": "Rumsfeld",
            "election": 20,
            "party": "Republican",
            "state": "Illinois",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#0000FF",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.imgur.com/gGfl88E.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<div style='overflow-y:scroll;height:200px;'><p><p><blockquote style='border-style: solid!important; border-width: .1em!important; border-radius: 3px!important; color:#25090e !important; border-color:#25090e!important;margin: px 5px; padding: 2.5px; background: linear-gradient( 135deg, #FDF8F8, #FFF2F2 )!important; font-style: italic; font-size: 14px;'>“You go to war with the army you have, not the army you might want or wish to have at a later time.”</blockquote></p><p>Donald Rumsfeld is the perfect choice to be your backup man. Why? Because he is clean, youthful, and experienced. His hawkish stances will rally the base, his clean record will help clear up the aura of corruption tainting the Nixon Administration after Agnew's resignation. With an extensive record, Rumsfeld has racked up quite the name for himself in Washington. Despite relations with Nixon having been much cooler in his second term, he is still favored by him. <p> With his career prospects already seeming bright, Rumsfeld has found himself a place as the Vice Presidential Nominee for the Republican Party. He will not take this position for granted, however. His similar style of politics signals that he will not sit tight and be a placeholder. Tread lightly.",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 91,
        "fields": {
            "first_name": "Mo",
            "last_name": "Udall",
            "election": 20,
            "party": "Democratic",
            "state": "Idaho",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#28227c",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 164951,
        "fields": {
            "candidate": 92,
            "running_mate": 102
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 20,
        "candidates": [
            92,
            91
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 20,
        "candidates": [
            92,
            91
        ]
    }
]

jet_data = {
    "headerColor": "#290008",
    "windowColor": "#b25c5c",
    "containerColor": "#793e3e",
    "innerWindowColor": "#b25c5c",
    "bannerImageUrl": "https://i.imgur.com/vIpcsae.png",
    "backgroundImageUrl": "https://i.imgur.com/j1oYlcl.png",
    "endingTextColor": "#000000",
    "customQuote": "",
    "gameTitle": "The Deepest Valley"
}

    HistHexcolour=["#1072a1","#c23636"];
    HistName=["Mo Udall","John Connally"];
    HistEV=[367,171];
    HistPV=["42,182,882","36,906,578"];
    HistPVP=["53.7%","45.3%"];

//#startcode


corrr = '\n              <h2>THE DEEPEST VALLEY</h2>\n            ';


nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#290008";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#b25c5c";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#793e3e";

document.getElementById("header").src = "https://i.imgur.com/vIpcsae.png";

document.body.background = "https://i.imgur.com/j1oYlcl.png";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#b25c5c!important;}</style>";

//#endcode

//Achievements
campaignTrail_temp.achievements = {
    "True Cowboy" : {
        "image" : "https://i.imgur.com/qwb47R3.png",
        "description" : "Win.",
        "cannotBeCheated" : true
    }
}

//Css and UI
document.getElementById("inner_window_1").children[0].innerHTML="<h3>Do you have what it takes to win a Presidential Election?</i></h3>"

function addDynamicCSS() {
    var css = `

        .inner_window_question h3 .mytooltip{
            background-color: #d89393;
        }

        .mytooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
            border-radius: 3px;
            background-color: #d89393;
        }

        .mytooltip .mytooltiptext {
            width: 150px;
            background-color: #d89393;
            color: black;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 99; 
            bottom: 50%; 
            left: 20%;
            margin-left: -90px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 1px solid black;
            pointer-events: none;
            font-size: 13px !important;
            line-height: 1.5em !important;
            font-weight: normal !important;
            font-style: normal !important;
        }

        .mytooltip .mytooltiptext img {
            max-width: 150px;
            height: auto;
        }

        .mytooltip:hover .mytooltiptext {
            opacity: 1;
            transition-delay: 0.5s;
        }

        .inner_window_w_desc {
            border-style: none;
        }

        .inner_window_w_desc h3 {
            color: white;
            margin: 0;
        }

        .inner_window_question h3 {
            margin: 0 1em .5em;
            border: double;
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
            border-color: #c9c9c9;
            background-color: antiquewhite;
        }

        #map_container {
            height: 90%;
            width: 75%;
            float: left;
            margin-top: 1em;
            margin-left: 1em;
            border-bottom-right-radius: 20px;
            border-top-right-radius: 20px;
            border-style: double;
            border-color: #C9C9C9;
            background-color: antiquewhite;
        }

        .overlay_window h3 {
            margin: 0;
            padding: .3em 0 .1em;
            font-weight: 700;
            font-size: 1.5em;
            background-color: antiquewhite;
            border-bottom: double;
            border-color: #C9C9C9;
        }

        #campaign_sign p {
            margin: .1em;
            color: #FFFFFF;
            font-size: 2.7em;
            padding: .2em;
            font-weight: 700;
            line-height: .5em;
        }

        #final_results_description {
            font-size: 16px;
        }

        #menu_container {
            background-color: transparent;
        }

        #overall_result_container {
            background-color: transparent;
        }

        .campaign_trail_start_emphasis {
            padding: .8em;
            background-color: transparent;
        }

        button {
            background: #692429;
            color: #FFFFFF;
            border: 1px solid #000000;
            font-family: "Arial", sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }

        button:hover {
            background: #400b12;
            color: #FFFFFF;
            border: 1px solid #000000;
            font-family: "Arial", sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }

        button:active {
            background: #4a2601;
            color: #FFFFFF;
            border: 1px solid #000000;
            font-family: "Arial", sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }

        #election_id {
            background: #692429;
            color: #FFFFFF;
            border: 1px solid #000000;
            font-family: "Arial", sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }

        #candidate_id {
            background: #692429;
            color: #FFFFFF;
            border: 1px solid #000000;
            font-family: "Arial", sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }

        #sort_tab {
            background: #692429;
            color: #FFFFFF;
            border: 1px solid #000000;
            font-family: "Arial", sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }

        #state_info {
            background-color: antiquewhite;
        }

        #state_result {
            background-color: antiquewhite;
        }

        #state_result_container {
            background-color: #9d2235;
        }

        #overall_result {
            background-color: antiquewhite;
        }

        #state_tab {
            background: #692429;
            color: #FFFFFF;
            border: 1px solid #000000;
            font-family: "Arial", sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }

        #running_mate_id {
            background: #692429;
            color: #FFFFFF;
            border: 1px solid #000000;
            font-family: "Arial", sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }

        #game_type_id {
            background: #692429;
            color: #FFFFFF;
            border: 1px solid #000000;
            font-family: "Arial", sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }

        #difficulty_level_id {
            background: #692429;
            color: #FFFFFF;
            border: 1px solid #000000;
            font-family: "Arial", sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }

        #themePicker {
            background: #692429;
            color: #FFFFFF;
            border: 1px solid #000000;
            font-family: "Arial", sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }

        #campaign_sign {
            background-color: #290008;
            border-style: solid;
            border-width: .5em;
            border-color: #793e3e;
            width: 90%;
            margin: 0 auto;
            text-align: center;
        }

    `;

    var styleElem = document.createElement("style");
    styleElem.appendChild(document.createTextNode(css));
    document.head.appendChild(styleElem);
}

addDynamicCSS();

tooltipList = [
    {searchString: "Lyndon", explanationText: "<img src=https://i.imgur.com/XI0WpZD.jpeg>Former mentor. He once controlled America, now he can't even control his vices. Poor bastard."},
    {searchString: "Johnson", explanationText: "<img src=https://i.imgur.com/XI0WpZD.jpeg>Former mentor. He once controlled America, now he can't even control his vices. Poor bastard."},

];


    RecReading = true;

    const windowsAdvisorTargetNode = document.getElementById("game_window");
    const windowsAdvisorConfig = { attributes: true, childList: true, subtree: true };
    const callback = (mutationList, observer) => {
        let visitWindow = document.getElementsByClassName("overlay_window")[0];
        if (!visitWindow || visitWindow.classList.contains("done")) return;
        visitWindow.classList.add("done", "window");
        let titleBar = visitWindow.querySelector("h3");
        titleBar.classList.add("title-bar", "title-bar-text");
        titleBar.style.paddingLeft = "3px";
    };
    // const observer = new MutationObserver(callback);
    // observer.observe(windowsAdvisorTargetNode, windowsAdvisorConfig);
    
    class Song {
        constructor(title, artist, coverLink, audioLink) {
            this.title = title;
            this.artist = artist;
            this.coverLink = coverLink; 
            this.audioLink = audioLink;
        }
        getTitle()     { return this.title; }
        getArtist()    { return this.artist; }
        getCoverLink() { return this.coverLink; }
        getAudioLink() { return this.audioLink; }
    }
    
    class Playlist {
        constructor() {
            this.songs = [];
            this.currentSongIndex = 0;
        }
        addSong(song) {
            this.songs.push(song);
        }
        getCurrentSong() {
            return this.songs[this.currentSongIndex];
        }
        playNext() {
            this.currentSongIndex = (this.currentSongIndex + 1) % this.songs.length;
        }
        playPrevious() {
            this.currentSongIndex = (this.currentSongIndex - 1 + this.songs.length) % this.songs.length;
        }
    }
    window.Playlist = Playlist;
    window.Song = Song;
    
    function changePlaylist(newPlaylist) {
        playlist = newPlaylist;
        playlist.currentSongIndex = 0;
        updateUI();
        const audio = document.getElementById("audio");
        audio.src = playlist.getCurrentSong().getAudioLink();
        audio.play();
    }
    window.changePlaylist = changePlaylist;
    
    function updateUI() {
        const currentSong = playlist.getCurrentSong();
        document.getElementById("track-title").textContent  = currentSong.getTitle();
        document.getElementById("track-artist").textContent = currentSong.getArtist();
        const coverArtElem = document.getElementById("cover-art");
        if (coverArtElem) {
            coverArtElem.src = currentSong.getCoverLink();
        }
    }
    
    function setupMusicPlayer() {
        playlist = new Playlist();
    
        const newSong1 = new Song(
            "John Is Going To Be Alright", 
            "UVA Miller Center Archives",   
            "https://i.imgur.com/VII5Pn4.jpeg",
            "https://audio.jukehost.co.uk/NCNFO3LRbjeOmJuQanQ6v0HCLrSqSagt"
        );    
        const newSong2 = new Song(
            "That'll Be The Day",  
            "Buddy Holly",            
            "https://i.imgur.com/BkWkY41.jpeg",
            "https://audio.jukehost.co.uk/7FSYBXczPckJSvpNcE3neeWSugDpraPK"
        );
        const newSong3 = new Song(
            "Peggy Sue", 
            "Buddy Holly",   
            "https://i.imgur.com/0IFC8l6.jpeg",
            "https://dn721604.ca.archive.org/0/items/ka-buddy-holly/45%20Record%20Cabinet/B/buddy%20holly/buddy%20holly%20-%20peggy%20sue.mp3"
        );
        const newSong4 = new Song(
            "Oh Boy!",  
            "Buddy Holly",            
            "https://i.imgur.com/NXijnJh.jpeg",
            "https://audio.jukehost.co.uk/wAtP4XBP8vkYozpN6jB1jQbITWWNfjDS"
        );
    
        playlist.addSong(newSong1);
        playlist.addSong(newSong2);
        playlist.addSong(newSong3);
        playlist.addSong(newSong4);

        let audio = document.getElementById("audio");
        if (!audio) {
            audio = document.createElement("audio");
            audio.id = "audio";
            document.body.appendChild(audio);
        }
        audio.src = playlist.getCurrentSong().getAudioLink();
    
        const tapeRecorder = document.createElement("div");
        tapeRecorder.id = "tape-recorder";
        const gameWindow_player = document.getElementById("game_window");
        gameWindow_player.insertAdjacentElement("afterend", tapeRecorder);
    
        const infoOverlay = document.createElement("div");
        infoOverlay.id = "info-overlay";
    
        const titleDiv = document.createElement("div");
        titleDiv.id = "track-title";
    
        const artistDiv = document.createElement("div");
        artistDiv.id = "track-artist";
    
        infoOverlay.appendChild(titleDiv);
        infoOverlay.appendChild(artistDiv);
        tapeRecorder.appendChild(infoOverlay);
    
        const coverWrapper = document.createElement("div");
        coverWrapper.id = "cover-wrapper";
        tapeRecorder.appendChild(coverWrapper);
    
        const coverBG = document.createElement("img");
        coverBG.id = "cover-bg";
        coverBG.src = "https://i.imgur.com/E2mOaNa.png";
    
        const coverArt = document.createElement("img");
        coverArt.id = "cover-art";
        coverArt.src = playlist.getCurrentSong().getCoverLink();
    
        coverWrapper.appendChild(coverBG);
        coverWrapper.appendChild(coverArt);
    
        const playerBottom = document.createElement("div");
        playerBottom.id = "player-bottom";
        tapeRecorder.appendChild(playerBottom);
    
        const controlsOverlay = document.createElement("div");
        controlsOverlay.id = "controls-overlay";
    
        const prevButton = document.createElement("button");
        prevButton.id = "prev-button";
        prevButton.textContent = "←";
        prevButton.addEventListener("click", () => {
            playlist.playPrevious();
            updateUI();
            audio.src = playlist.getCurrentSong().getAudioLink();
            audio.currentTime = 0;
            audio.play();
            tapeRecorder.style.backgroundImage = "url('https://i.imgur.com/I7jF0Ak.gif')";
            toggleButton.textContent = "Stop";
        });
    
        const nextButton = document.createElement("button");
        nextButton.id = "next-button";
        nextButton.textContent = "→";
        nextButton.addEventListener("click", () => {
            playlist.playNext();
            updateUI();
            audio.src = playlist.getCurrentSong().getAudioLink();
            audio.currentTime = 0;
            audio.play();
            tapeRecorder.style.backgroundImage = "url('https://i.imgur.com/I7jF0Ak.gif')";
            toggleButton.textContent = "Stop";
        });
    
        const volumeSlider = document.createElement("input");
        volumeSlider.id = "volume-slider";
        volumeSlider.type = "range";
        volumeSlider.min = "0";
        volumeSlider.max = "100";
        volumeSlider.value = "50";
        volumeSlider.addEventListener("input", function() {
            const volumeValue = parseFloat(this.value) / 100;
            audio.volume = volumeValue;
        });
    
        const toggleButton = document.createElement("button");
        toggleButton.id = "toggle-button";
        tapeRecorder.style.backgroundImage = "url('https://i.imgur.com/I7jF0Ak.gif')";
        toggleButton.textContent = "Stop";
        toggleButton.addEventListener("click", () => {
            if (audio.paused) {
                audio.play();
                tapeRecorder.style.backgroundImage = "url('https://i.imgur.com/I7jF0Ak.gif')";
                toggleButton.textContent = "Stop";
            } else {
                audio.pause();
                tapeRecorder.style.backgroundImage = "url('https://i.imgur.com/Bui2rFO.png')";
                toggleButton.textContent = "Start";
            }
        });
    
        controlsOverlay.appendChild(prevButton);
        controlsOverlay.appendChild(nextButton);
        controlsOverlay.appendChild(volumeSlider);
        controlsOverlay.appendChild(toggleButton);
        playerBottom.appendChild(controlsOverlay);
    
        const progressContainer = document.createElement("div");
        progressContainer.id = "progress-container";
    
        const progressBar = document.createElement("input");
        progressBar.id = "progress-bar";
        progressBar.type = "range";
        progressBar.min = 0;
        progressBar.value = 0;
        progressBar.step = 1;
    
        progressBar.addEventListener("input", (e) => {
            audio.currentTime = parseFloat(e.target.value);
        });
    
        progressContainer.appendChild(progressBar);
        playerBottom.appendChild(progressContainer);
    
        audio.addEventListener("ended", () => {
            playlist.playNext();
            updateUI();
            audio.src = playlist.getCurrentSong().getAudioLink();
            audio.currentTime = 0;
            audio.play();
            tapeRecorder.style.backgroundImage = "url('https://i.imgur.com/I7jF0Ak.gif')";
            toggleButton.textContent = "Stop";
        });
    
        updateUI();
    
        audio.addEventListener("timeupdate", () => {
            if (!audio.duration || isNaN(audio.duration)) return;
            progressBar.max = audio.duration;
            progressBar.value = audio.currentTime;
        });
    
        audio.play().then(() => {
            tapeRecorder.style.backgroundImage = "url('https://i.imgur.com/I7jF0Ak.gif')";
            toggleButton.textContent = "Stop";
        }).catch(() => {
            console.log("Autoplay blocked. Waiting for user interaction...");
            tapeRecorder.style.backgroundImage = "url('https://i.imgur.com/Bui2rFO.png')";
            toggleButton.textContent = "Start";
        });
    }
    
    const style = document.createElement("style");
    style.textContent = `
    #tape-recorder {
      width: 495px;
      height: 325px;
      transform: scale(0.85);
      background-position: center;
      background-size: cover;
      position: absolute;
      display: block;
      margin: 0 auto;
    }
    
    #info-overlay {
      position: absolute;
      top: 10px;
      left: 10px;
      color: #fff;
      font-family: sans-serif;
      text-shadow: 1px 1px 2px black;
    }
    #track-title {
      font-size: 18px;
      font-weight: bold;
    }
    #track-artist {
      font-size: 14px;
      margin-top: 3px;
    }
    
    #cover-wrapper {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1;
      pointer-events: none;
    }
    #cover-bg {
      position: absolute;
      width: 200px;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
    }
    #cover-art {
      position: absolute;
      width: 180px;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
    }
    
    #player-bottom {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      z-index: 2;
    }
    #controls-overlay {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 10px;
    }
    
    #prev-button,
    #next-button,
    #toggle-button {
      appearance: auto;
      font-style: normal;
      font-variant: normal;
      font-weight: normal;
      font-stretch: normal;
      font-size: 1rem;
      font-family: inherit;
      text-rendering: auto;
      color: buttontext;
      letter-spacing: normal;
      word-spacing: normal;
      line-height: normal;
      text-transform: none;
      text-indent: 0px;
      text-shadow: none;
      display: inline-block;
      text-align: center;
      align-items: flex-start;
      cursor: pointer;
      box-sizing: border-box;
      background-color: buttonface;
      margin: 0em;
      border-width: 2px;
      border-style: outset;
      border-color: buttonborder;
      border-image: initial;
      padding: 6px 10px;
      min-width: 60px;
    }
    #prev-button:hover,
    #next-button:hover,
    #toggle-button:hover {
      border-style: inset;
      background-color: #e0e0e0;
    }
    
    #volume-slider {
      -webkit-appearance: none;
      appearance: none;
      width: 100px;
      height: 14px;
      background-color: buttonface;
      border: 2px solid buttonborder;
      border-radius: 0;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      cursor: pointer;
    }
    #volume-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 14px;
      height: 24px;
      background: buttonface;
      border: 2px solid buttonborder;
      border-radius: 0;
      cursor: pointer;
      box-sizing: border-box;
      margin-top: -5px;
    }
    #volume-slider::-moz-range-thumb {
      width: 14px;
      height: 24px;
      background: buttonface;
      border: 2px solid buttonborder;
      border-radius: 0;
      cursor: pointer;
      box-sizing: border-box;
    }
    
    #progress-container {
      display: flex;
      flex-direction: row;
      width: 100%;
      justify-content: center;
    }
    #progress-bar {
      -webkit-appearance: none;
      appearance: none;
      width: 200px;
      height: 14px;
      background-color: #515151;
      border: 2px solid buttonborder;
      border-radius: 0;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      cursor: pointer;
    }
    #progress-bar::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 14px;
      height: 24px;
      background: #d0d0d0;
      border: 2px solid buttonborder;
      border-radius: 0;
      cursor: pointer;
      box-sizing: border-box;
      margin-top: -5px;
    }
    #progress-bar::-moz-range-thumb {
      width: 14px;
      height: 24px;
      background: #d0d0d0;
      border: 2px solid buttonborder;
      border-radius: 0;
      cursor: pointer;
      box-sizing: border-box;
    }
    
    #bonus_menu_area {
      margin-top: 120px;
    }
        }
        .inner_window_question {
            min-height: 321px;
            height: auto !important;
            display: flex;
            flex-direction: column;
        }
        .inner_inner_window {
            height: auto;
            transition: height 0.3s ease;
        }
        .inner_window_question p {
            margin: 0;
            padding: 0;
            margin-top: auto;
            transform: translateY(-4px); 
        }

        #question_form br { display: none; }

        #question_form form {
            display: grid;
            grid-template-columns: auto 1fr; 
            align-items: start;         
            row-gap: 0;
            max-width: 930px
        }

        #question_form input[type="radio"] {
            grid-column: 1;
            margin: 0;
            margin-right: -3px;
            align-self: center;           
            transform: translateY(-1px); 
        }

        #question_form input[type="radio"] + label {
            grid-column: 2;
            display: block;                  
            padding: 3px 6px; 
            margin: 0;      
            line-height: 1.2;
            border: none; 
            border-bottom: 1px solid #ccc; 
            background: #f9f9f9;
            transition: background-color .2s, border-color .2s;
            cursor: pointer;
            width: min(100%, 930px);
        }

        #question_form form > input[type="radio"]:last-of-type + label {
            border-bottom: none;
        }

        #question_form label {
            font-size: 14px;
            font-weight: 400; 
            margin: 1px; /* prevent any bottom margin */
            line-height: 1.2;
        }

        #question_form input[type="radio"]:checked + label {
            background: #EDF3F7;
            border-bottom-color: #548EAD;
        }

        #question_form input[type="radio"] + label:hover,
        #question_form input[type="radio"] + label:focus {
            font-size: 14px;
            font-weight: 400; 
            background: #f1f1f1;
        }

        @media only screen and (max-width: 768px) {
            #opponent_selection_description_window p {
                display: none !important;
            }
            .inner_window_question {
                height: auto !important;
                min-height: 0 !important;
                max-height: none !important;
                position: static !important;
                top: auto !important;
                bottom: auto !important;
                flex: 0 1 auto !important;
                align-self: auto !important;
                grid-row: auto !important;
                grid-column: auto !important;
                justify-self: auto !important;
                display: flow-root !important;  
                overflow: visible !important;
                box-sizing: border-box !important;
                max-height: 395px;
            }
            .inner_window_question > :first-child { margin-top: 0; }
            .inner_window_question > :last-child  { margin-bottom: 0; }

            .inner_window_question,
            #results_container,
            #overall_details_container,
            #main_content_area_reading,
            #inner_window_2,
            #inner_window_3,
            #inner_window_4,
            #advisors {
                font-size: 1.8em;
            }

            #inner_window_2,
            #inner_window_3 {
                height: 82%;
            }

            #headquarter {
                overflow: auto;
                font-size: 1.5em;
            }

            #inner_window_2 select,
            #inner_window_3 select,
            #inner_window_4 select {
                font-size: 1em;
                padding: 10px;
            }

            #inner_window_2 button,
            #inner_window_3 button,
            #inner_window_4 button,
            #game_window button,
            #headquarter button,
            #advisorsDiv button {
                font-size: 1em;
                line-height: 2em;
            }

            #inner_window_2,
            #inner_window_3,
            #inner_window_4 {
                overflow: auto;
            }

    `;
    document.head.appendChild(style);
    
    setupMusicPlayer();

//Special Descs
e.ElectionPopup = "Make a prayer, John."
e.WinPopup = "Thank fuck."
e.LosePopup = "Fuck."
e.SelAnsContText = "Get your head in the game, you need to do something."
